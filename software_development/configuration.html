

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Developer Info and Release Configuration &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/additional_style.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_architecture/index.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT Software And Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Developer Info and Release Configuration</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="developer-info-and-release-configuration">
<h1>Developer Info and Release Configuration<a class="headerlink" href="#developer-info-and-release-configuration" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the installation is done via the USB drive, one can bypass the manual setup
and configuration on this page.</p>
</div>
<p>Before establishing the services, there is a small amount of basic
configuration.  If the installation is done via the kickstart USB drive, basic
services and network configurations would have already been established and one
can move on to the next page.  However, if the release is installed manually or
locally by an user downloading from <em>GitHub</em>, this page will show the steps
for service configuration.</p>
<p>To communicate, components send message packets to a network of conduits, i.e.
ports, where the messages follow the <em>tcp/udp</em> protocol.  For this to work, each
component has a unique URI identifier address, while each communication port,
has an URL.  A component may have multiple ports that serve different purposes,
described below.</p>
<p>In addition to providing a communication service, two other services, logging
and telemetry, are essential for controlling hardware and software.  The logging
service uses <em>mongoDB</em> as the backend database, with each service having its
own, independent, database.</p>
<div class="section" id="services-configuration">
<h2>Services Configuration<a class="headerlink" href="#services-configuration" title="Permalink to this headline">¶</a></h2>
<p>Currently we use only one unique server per service. Each server is a distributed component with the following ports:</p>
<ul class="simple">
<li>one port to receive data (logs, monitored values, etc) from external distributed components</li>
<li>one port to publish data to subscribers</li>
<li>one port to receive queries and send answers from/to clients</li>
<li>one local connection to the database server</li>
</ul>
<p>Also, each service has an internal schedule to perform periodic checks or other tasks at certain rates.
This is the configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">log_server_1</span><span class="p">:</span>
    <span class="n">name</span>      <span class="p">:</span> <span class="s1">&#39;log_server_1&#39;</span>
    <span class="n">rate</span>      <span class="p">:</span> <span class="mi">600000</span>                                   <span class="c1"># periodic loop rate to perform checks, stats, etc.</span>
    <span class="n">url</span>       <span class="p">:</span> <span class="s1">&#39;tcp://127.0.0.1:9998&#39;</span>                   <span class="c1"># to receive log messages from components</span>
    <span class="n">pub_url</span>   <span class="p">:</span> <span class="s1">&#39;tcp://127.0.0.1:9995&#39;</span>                   <span class="c1"># to publish logs to subscribers</span>
    <span class="n">query_url</span> <span class="p">:</span> <span class="s1">&#39;tcp://127.0.0.1:9994&#39;</span>                   <span class="c1"># to receive querys from clients</span>
    <span class="n">db_url</span>    <span class="p">:</span> <span class="s1">&#39;mongodb://127.0.0.1:27017/gmt_test_logs_1&#39;</span> <span class="c1"># db to store log messages</span>
</pre></div>
</div>
<p>Note: The <em>pub_url</em> value shall be the same used in the GMT_LOG_URL environment var.
This variable is only required for the C++ components.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">telemetry_server_1</span><span class="p">:</span>
    <span class="n">name</span>      <span class="p">:</span> <span class="s1">&#39;telemetry_server_1&#39;</span>
    <span class="n">rate</span>      <span class="p">:</span> <span class="mi">600000</span>                                   <span class="c1"># periodic loop rate to perform checks, stats, etc.</span>
    <span class="n">url</span>       <span class="p">:</span> <span class="s1">&#39;tcp://127.0.0.1:9997&#39;</span>                   <span class="c1"># to receive monitored values from components</span>
    <span class="n">pub_url</span>   <span class="p">:</span> <span class="s1">&#39;tcp://127.0.0.1:9993&#39;</span>                   <span class="c1"># to publish monitors to subscribers</span>
    <span class="n">query_url</span> <span class="p">:</span> <span class="s1">&#39;tcp://127.0.0.1:9992&#39;</span>                   <span class="c1"># to receive queries from clients</span>
    <span class="n">db_url</span>    <span class="p">:</span> <span class="s1">&#39;mongodb://127.0.0.1:27017/gmt_test_telemetry_1&#39;</span> <span class="c1"># db to store monitors</span>
</pre></div>
</div>
</div>
<div class="section" id="databases-and-logs">
<h2>Databases and Logs<a class="headerlink" href="#databases-and-logs" title="Permalink to this headline">¶</a></h2>
<p>The Data Archive uses <em>mongoDB</em> as backend data base. Each service keeps an
independent database.</p>
<p>Each service daemon stores output and error messages on <cite>${GMT_ROOT}/var/log</cite>,
where <cite>GMT_ROOT</cite> is an environment variable indicating the path to the GMT root
directory. This variable is typically an empty string when installed in a linux
test environment, placing the log files in <cite>/var/log</cite>.</p>
<p>Please check these files if services failed to start or an error is shown while
checking their status</p>
</div>
<div class="section" id="firewall-and-network-ports">
<h2>Firewall and Network Ports<a class="headerlink" href="#firewall-and-network-ports" title="Permalink to this headline">¶</a></h2>
<p>The GMT software is networked system. The following instructions assume that the
used ports are open for tcp/udp communications.  With root/admin permissions
it’s possible to disable the whole firewall or specific ports can be open like
this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo firewall-cmd --add-port=$PORT/tcp --permanent --zone=public
$ sudo firewall-cmd --add-port=$PORT/udp --permanent --zone=public
</pre></div>
</div>
</div>
<div class="section" id="uris-and-urls">
<h2>URIs and URLs<a class="headerlink" href="#uris-and-urls" title="Permalink to this headline">¶</a></h2>
<p>GMT Components use an unique URI in the following scheme</p>
<blockquote>
<div><em>Usage:</em> <code class="docutils literal"><span class="pre">gmt://subsystem/component:port</span></code></div></blockquote>
<p>The port number is used to send the component setup (rates, ports, etc).
Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">gmt</span><span class="p">:</span><span class="o">//</span><span class="n">examples</span><span class="o">/</span><span class="n">basic_controller</span><span class="p">:</span><span class="mi">8001</span>
</pre></div>
</div>
<p>GMT Ports have an url using the <em>nanomsg</em> scheme:</p>
<blockquote>
<div><em>Usage:</em> <code class="docutils literal"><span class="pre">transport://host:net_port</span></code></div></blockquote>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">tcp</span><span class="p">:</span><span class="o">//</span><span class="mf">127.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">:</span><span class="mi">9001</span>
</pre></div>
</div>
</div>
<div class="section" id="environment-vars">
<h2>Environment vars<a class="headerlink" href="#environment-vars" title="Permalink to this headline">¶</a></h2>
<p>Some UNIX environment variables are required and they should be automatically applied. See this file:</p>
<blockquote>
<div><cite>${GMT_ROOT}/etc/gmt_env_vars</cite></div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.9.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>