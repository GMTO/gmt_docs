

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>13. UI Framework &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/additional_style.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../index.html"/>
        <link rel="up" title="Software Development" href="index.html"/>
        <link rel="next" title="Data Products" href="../data_products/index.html"/>
        <link rel="prev" title="12. HDK example" href="hdk_example.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_architecture/index.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Software Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">1. Installing the SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">2. Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtual_machine/virtual_machine.html">3. Installing a Virtual Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="gds_guide.html">4. gds documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="grs_guide.html">5. grs documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_guide/modeling_guidelines.html">6. Model specification guide document</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_language_mapping/index.html">7. Model-language mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdk_1_6_migration_guide.html">8. Migration guide to SDK 1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_guidelines.html">9. OCS Test Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_services_user_guide.html">10. Core Services user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="isample_example.html">11. ISample Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdk_example.html">12. HDK example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">13. UI Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">13.1. Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-your-enviornment">13.1.1. Setting up your enviornment</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#seeing-data-with-navigator">13.2. Seeing Data With Navigator</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#server">13.2.1. Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="#client">13.2.2. Client</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#navigator-overview">13.3. Navigator Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting-guide">13.4. Troubleshooting Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT Software And Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Software Development</a> &raquo;</li>
        
      <li>13. UI Framework</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ui-framework">
<span id="ui-fwk"></span><h1>13. UI Framework<a class="headerlink" href="#ui-framework" title="Permalink to this headline">¶</a></h1>
<p>The UI Framework provides a GUI toolkit for the OCS.  One of the GUI apps is called Navigator, and sometimes referred to as the “Engineering UI”, as it allows you to visualize models built with OCS SDK.  You can use the Engineering UI to see the data produced and consumed by your controllers.</p>
<p>Navigator can run on MacOS or a Linux Desktop environment.  macOS Mojave, Catalina and CentOS 8 Desktop have been verified.</p>
<div class="section" id="installation">
<h2>13.1. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install Navigator you will need to donwload the packaged app and set up your local environment.  Downloads are available for macOS and centOS.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>wget http://52.52.46.32/srv/gmt/releases/navigator/centos8/ocs_navigator.AppImage
wget http://52.52.46.32/srv/gmt/releases/navigator/macos/ocs_navigator.zip
</pre></div>
</div>
<p>This is a packaged binary app that you can run after you have set up your environment.  For CentOS you will need additional dependencies:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>dnf -y install fuse clang dbus-devel gtk3-devel libnotify-devel <span class="se">\</span>
           xorg-x11-server-utils libcap-devel <span class="se">\</span>
           cups-devel libXtst-devel alsa-lib-devel libXrandr-devel <span class="se">\</span>
           nss-devel <span class="se">\</span>
     libXScrnSaver
</pre></div>
</div>
<div class="section" id="setting-up-your-enviornment">
<h3>13.1.1. Setting up your enviornment<a class="headerlink" href="#setting-up-your-enviornment" title="Permalink to this headline">¶</a></h3>
<p>The Engineering UI uses the <code class="docutils literal"><span class="pre">gmt_env</span></code> if you have set that up.  If you don’t have that, you’ll need to set up a <code class="docutils literal"><span class="pre">$GMT_LOCAL</span></code> environment.  This is very similar to setting up the SDK.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For bash, you’ll need to edit the <code class="docutils literal"><span class="pre">~/.bash_profile</span></code>. For zsh you’ll need to edit <code class="docutils literal"><span class="pre">~/.zshrc</span></code>.</p>
</div>
<p>To set up a <code class="docutils literal"><span class="pre">$GMT_LOCAL</span></code> environment, first designate a directory and set your <code class="docutils literal"><span class="pre">~/.bash_profile</span></code> or <code class="docutils literal"><span class="pre">~/.zshrc</span></code> environment variables.  Asumming the path is <code class="docutils literal"><span class="pre">/home/gmto/working_dir</span></code>, then your export should look like</p>
<p>Create the following folder structure in your <code class="docutils literal"><span class="pre">$GMT_LOCAL</span></code> directory</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="p">|</span>-- etc
<span class="p">|</span>   <span class="p">|</span>-- bundles
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- bundles.coffee
<span class="p">|</span>   <span class="p">|</span>   <span class="p">|</span>-- ocs_local_bundle.coffee
<span class="p">|</span>   <span class="p">|</span>-- conf
<span class="p">|</span>-- lib
<span class="p">|</span>-- modules
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">bundles.coffee</span></code> should have</p>
<div class="highlight-coffee"><div class="highlight"><pre><span></span><span class="nv">module.exports =</span>
    <span class="nv">ocs_local_bundle: </span>  <span class="p">{</span><span class="nv">scope: </span><span class="s">&quot;local&quot;</span><span class="p">,</span>  <span class="nv">desc: </span><span class="s">&quot;GMT OCS SDK bundle&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">ocs_local_bundle.coffee</span></code> should look like</p>
<div class="highlight-coffee"><div class="highlight"><pre><span></span><span class="nv">module.exports =</span>
    <span class="nv">name: </span>     <span class="s">&quot;local&quot;</span>
    <span class="nv">desc: </span>     <span class="s">&quot;List of local development modules&quot;</span>
    <span class="nv">elements: </span> <span class="p">{}</span>
</pre></div>
</div>
<p>This will give you the base parameters to load the local environment. The <code class="docutils literal"><span class="pre">elements</span></code> key in this example is intentionally empty. This will change as you add OCS bundles.  You will need to have corresponding model files for the bundles you define.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The bundles you define need to have corresponding webpack model files in <code class="docutils literal"><span class="pre">$GMT_LOCAL/lib/js</span></code>.  You will need to copy these files on your own.</p>
</div>
<p>Now you can star the Navigator app by double clicking on the icon.  If you have done all of the above correctly you will see the starfield animation.</p>
<img alt="Navigator on first launch." class="align-center" src="../_images/navigator_first_run.png" />
</div>
</div>
<div class="section" id="seeing-data-with-navigator">
<h2>13.2. Seeing Data With Navigator<a class="headerlink" href="#seeing-data-with-navigator" title="Permalink to this headline">¶</a></h2>
<p>The Navigator app has some parallels with server/client model.  This is an inexact comparison, however, it’s a useful analogy to explain the configuration required to see your data.  The <code class="docutils literal"><span class="pre">server</span></code> in this case is the environment that runs your OCS controllers, adapters, services, etc.  The <code class="docutils literal"><span class="pre">client</span></code> is the Navigator UI which will most likely run on a separate Linux machine with full desktop graphics support or macOS.</p>
<p>To see data, both your client and server need to have identical models and corresponding configuration files.  While a model might describe multiple components and their relationships, a configuration file is defined for a single component at a time.</p>
<p>The easiest thing to do is to copy the files you have in <code class="docutils literal"><span class="pre">$GMT_LOCAL/lib/js/*_model.js</span></code> and <code class="docutils literal"><span class="pre">$GMT_LOCAL/etc/conf</span></code> on your server to your client.  Navigator uses the same paths to discover your files.  You will then need to modify your config files as follows.</p>
<div class="section" id="server">
<h3>13.2.1. Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<p>On the machine where your components run, you will have to edit your configuration file so that it publishes data as a server.  In a configuration file the field you need to edit is <code class="docutils literal"><span class="pre">properties.host.default_value</span></code> with the value of <cite>0.0.0.0</cite> and not the loopback or server address.  In some cases this will require that you recompile your config files.</p>
<p>Your server should not have the firewall enabled.  To disable the firewall <code class="docutils literal"><span class="pre">sudo</span> <span class="pre">systemctl</span> <span class="pre">stop</span> <span class="pre">firewalld</span></code>.</p>
</div>
<div class="section" id="client">
<h3>13.2.2. Client<a class="headerlink" href="#client" title="Permalink to this headline">¶</a></h3>
<p>Likewise, edit the the configuration on your client so that it points to the server IP where you’re trying to see data.  You can view this address with the <code class="docutils literal"><span class="pre">ifconfig</span></code> command on your server.  This config will live in the <code class="docutils literal"><span class="pre">$GMT_LOCAl/etc/conf</span></code> directory.  Set the <code class="docutils literal"><span class="pre">properties.host.default_value</span></code> of the corresponding config to the valid IP of the server you’re trying to connect to.</p>
</div>
</div>
<div class="section" id="navigator-overview">
<h2>13.3. Navigator Overview<a class="headerlink" href="#navigator-overview" title="Permalink to this headline">¶</a></h2>
<a class="reference external image-reference" href="../_images/navigator_overview.png"><img alt="Navigator overview." class="align-center" src="../_images/navigator_overview.png" /></a>
<p>You can inspect data on any part of your component the same way you do on the command line.</p>
<a class="reference external image-reference" href="../_images/navigator_data1.png"><img alt="Navigator with inspect." class="align-center" src="../_images/navigator_data1.png" /></a>
<a class="reference external image-reference" href="../_images/navigator_data2.png"><img alt="Navigator  inspect." class="align-center" src="../_images/navigator_data2.png" /></a>
<p>You can also send data.</p>
<a class="reference external image-reference" href="../_images/navigator_send.png"><img alt="Navigator send." class="align-center" src="../_images/navigator_send.png" /></a>
</div>
<div class="section" id="troubleshooting-guide">
<h2>13.4. Troubleshooting Guide<a class="headerlink" href="#troubleshooting-guide" title="Permalink to this headline">¶</a></h2>
<p>The engineering app loads the local bundles defined in <code class="docutils literal"><span class="pre">$GMT_LOCAL/etc/bundles</span></code> and the webpack model files in <code class="docutils literal"><span class="pre">$GMT_LOCAL/lib/js</span></code>.  If you enable bundles, but no corresponding model lib file exists, the UI might end up an incosistent or ‘blank’ state.</p>
<ul class="simple">
<li><strong>No navigation tree</strong>: the navigation tree is rendered from the local bundles enabled in <code class="docutils literal"><span class="pre">$GMT_LOCAL/etc/bundles</span></code>.  The bundles defined there need to exist in your <code class="docutils literal"><span class="pre">$GMT_LOCAL/lib/js</span></code> folder.  You can create these by running <code class="docutils literal"><span class="pre">webpack</span></code> on your model.</li>
<li><strong>Incositent Navigation tree</strong>: If you don’t see a newly added (or still see a deleted element in the tree) it’s because Navigator persists your menu state, so when you make changes to your bundles or edit your model files you need to manually clear the application cache.  Press <code class="docutils literal"><span class="pre">CMD+,</span></code> to see the Navigator preferences.  Find the <cite>Reset application state</cite> button and press it.  If this works, your menu will have been rebuilt and should be consistent again.</li>
<li><strong>Blank screen</strong>: If the UI starts with a blank screen, it’s likely there’s an incosistent configuration, for example, you defined a bundle, but there is no webpack version of the model in <code class="docutils literal"><span class="pre">$GMT_LOCAL/lib/js</span></code>.  Open the Developer console and check the error message.</li>
</ul>
<p>In some cases the cached data might have caused an error.  There are three possible ways to fix this in order of severity:</p>
<p>Open the app development console by selecting from the OS menu <code class="docutils literal"><span class="pre">Developer</span> <span class="pre">&gt;</span> <span class="pre">Toggle</span> <span class="pre">developer</span> <span class="pre">tools</span></code>.  In the developer console type <code class="docutils literal"><span class="pre">persistor.purge()</span></code> press <cite>Enter</cite> and restart the app.</p>
<p>If that fails,</p>
<p>Delete the app, and reinstall.</p>
<p>If that also fails, try deleting the cache directly from your disk</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>rm -fr ~/.config/Electron
rm -fr ~/.config/ocs_navigator
</pre></div>
</div>
<p>If this does not fix your problem, it’s possible that your bundle and your modules are inconsistent.  Check that what you define in <code class="docutils literal"><span class="pre">$GMT_LOCAL/etc/bundles</span></code> has a corresponding webpack file in <code class="docutils literal"><span class="pre">$GMT_LOCAL/lib/js</span></code>.</p>
<ul>
<li><p class="first"><strong>Unresponsive UI</strong>: in some case if the UI becomes unresponsive, press <code class="docutils literal"><span class="pre">CMD+R</span></code> to refresh.  If that fails to solve the problem, restart the CLI app.</p>
</li>
<li><p class="first"><strong>No data</strong>: Ensure that the ports used by the controllers to publish data are accessible through the firewall. The following will disable the firewall on CentOS:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo systemctl stop firewalld
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../data_products/index.html" class="btn btn-neutral float-right" title="Data Products" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hdk_example.html" class="btn btn-neutral" title="12. HDK example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.9.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>