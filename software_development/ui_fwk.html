

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>13. UI Framework &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/additional_style.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../index.html"/>
        <link rel="up" title="Software Development" href="index.html"/>
        <link rel="next" title="Data Products" href="../data_products/index.html"/>
        <link rel="prev" title="12. HDK example" href="hdk_example.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_architecture/index.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Software Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">1. Installing the SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">2. Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtual_machine/virtual_machine.html">3. Installing a Virtual Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="gds_guide.html">4. gds documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="grs_guide.html">5. grs documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_guidelines.html">6. Model specification guide document</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_language_mapping/index.html">7. Model-language mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdk_1_6_migration_guide.html">8. Migration guide to SDK 1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_guidelines.html">9. OCS Test Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_services_user_guide.html">10. Core Services user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="isample_example.html">11. ISample Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdk_example.html">12. HDK example</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">13. UI Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installation">13.1. Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engineering-app">13.2. Engineering App</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">13.3. Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-guide">13.4. User Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="#launching-custom-panels">13.5. Launching Custom Panels</a></li>
<li class="toctree-l3"><a class="reference internal" href="#troubleshooting-guide">13.6. Troubleshooting Guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT Software And Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Software Development</a> &raquo;</li>
        
      <li>13. UI Framework</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ui-framework">
<span id="ui-fwk"></span><h1>13. UI Framework<a class="headerlink" href="#ui-framework" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The UI framework is currently only supported on MacOS.  Linux support will be available in future releases.</p>
</div>
<p>The UI Framework introduces a set of libraries and a windowed application that provides a GUI for the OCS.  The framework handles three primary concerns</p>
<ul class="simple">
<li>Rendering (drawing) elements to the screen (DOM)</li>
<li>Library of re-usable UI components that can be shared across the project</li>
<li>An Engineering App that provides an interface to the OCS</li>
</ul>
<div class="section" id="installation">
<h2>13.1. Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Download the Mac App</p>
<ul class="simple">
<li><a class="reference external" href="http://52.52.46.32/srv/gmt/releases/navigator/mac/ocs_navigator_app_1.7.0.zip">http://52.52.46.32/srv/gmt/releases/navigator/mac/ocs_navigator_app_1.7.0.zip</a></li>
</ul>
<p>You can unzip the app anywhere on your MacOS file system.  Double click on the icon to run.</p>
</div>
<div class="section" id="engineering-app">
<h2>13.2. Engineering App<a class="headerlink" href="#engineering-app" title="Permalink to this headline">¶</a></h2>
<p>The engineering application provides a GUI to the OCS model.  It is a downloadble Mac app that you can run after installing the SDK on your Mac.</p>
<p>The UI engineering app uses your local bundles from <code class="docutils literal"><span class="pre">$GMT_LOCAL/etc/bundles</span></code> and allows you to see a visual representation of your model files’ input/output ports.  For now, the Engineering app runs in MacOS.</p>
<p>To launch the application, double click on the app icon.</p>
</div>
<div class="section" id="configuration">
<h2>13.3. Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The User Interface needs to be configured to connect to the correct control components to receive data. Without proper configuration, the application may look like this:</p>
<img alt="Navigator application - No connection to HDK components" class="align-center" src="../_images/Navigator_HDK_first_open.png" />
<p>Edit the appropriate config files in the <code class="docutils literal"><span class="pre">src/etc/conf</span></code> folder to point to the correct IP address for input and output ports. For example,</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>/modules/ocs_hdk_dcs/src/etc/conf/hdk_ctrl_pkg/hdk_main_ctrl/
$ sed -i <span class="s1">&#39;&#39;</span> <span class="s2">&quot;s/127.0.0.1/172.16.10.31/g&quot;</span> hdk_main_ctrl_config.coffee
</pre></div>
</div>
<p>See the Troubleshooting section below for more help with connection issues.</p>
<p>Restart the Navigator application for changes to take affect.</p>
</div>
<div class="section" id="user-guide">
<h2>13.4. User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h2>
<img alt="Navigator application regions" class="align-center" src="../_images/Navigator_HDK_connected.png" />
<p>The navigator application contains two regions.</p>
<ol class="arabic simple">
<li><strong>Navigation</strong> This area contains the navigation tree.  The tree is a representation of your model and is built from information found in your local bundles.</li>
<li><strong>Context</strong> Items selected in the tree will display here.  Currently, it will display a representation of your model’s input/output ports and state variables.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <strong>Context</strong> area will optimistically render your model.  Not all model data can be currently rendered. Some items like <cite>properties</cite> and detailed port views are currently not supported.</p>
</div>
</div>
<div class="section" id="launching-custom-panels">
<h2>13.5. Launching Custom Panels<a class="headerlink" href="#launching-custom-panels" title="Permalink to this headline">¶</a></h2>
<p>From the menu, select <code class="docutils literal"><span class="pre">Vis</span> <span class="pre">package</span></code> and select <code class="docutils literal"><span class="pre">Panel</span> <span class="pre">loader</span></code>.  This will launch a panel allowing you to select a custom vis package.</p>
</div>
<div class="section" id="troubleshooting-guide">
<h2>13.6. Troubleshooting Guide<a class="headerlink" href="#troubleshooting-guide" title="Permalink to this headline">¶</a></h2>
<p>The engineering app loads the local bundles defined in <code class="docutils literal"><span class="pre">$GMT_LOCAL/etc/bundles</span></code>.  It currently uses the model generated config files to read data for your package.  Those config files are created in <code class="docutils literal"><span class="pre">$GMT_LOCAL/modules/&lt;your_module&gt;/src/etc/conf/&lt;your_package&gt;_pkg/&lt;component&gt;_config.coffee</span></code>; it’s useful to see what’s in those configs when troubleshooting data availability issues.  The availability of data to the UI largely depends on those config files.  The values generated will depend on how you write your model, but a sample of a config file might look like</p>
<blockquote>
<div><div class="highlight-coffee"><div class="highlight"><pre><span></span><span class="nv">module.exports =</span>
    <span class="nv">properties:</span>
        <span class="nv">uri: </span><span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;uri&#39;</span><span class="p">,</span> <span class="nv">default_value: </span><span class="s">&#39;gmt://hdk_dcs/hdk_main_ctrl/hdk_main_ctrl&#39;</span> <span class="p">,</span> <span class="nv">type: </span><span class="s">&#39;String&#39;</span><span class="p">,</span> <span class="nv">desc: </span><span class="s">&#39;Uri path for the component&#39;</span> <span class="p">}</span>
        <span class="c1"># other fields ommited</span>

    <span class="nv">state_vars:</span>
        <span class="nv">hmi: </span><span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;hmi&#39;</span><span class="p">,</span>   <span class="p">}</span>
        <span class="nv">motor: </span><span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;motor&#39;</span><span class="p">,</span>   <span class="p">}</span>

    <span class="nv">input_ports:</span>
        <span class="nv">hmi_goal: </span>           <span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;hmi_goal&#39;</span><span class="p">,</span>              <span class="nv">protocol: </span><span class="s">&#39;pull&#39;</span><span class="p">,</span>  <span class="nv">url: </span><span class="s">&#39;tcp://127.0.0.1:8116&#39;</span><span class="p">,</span> <span class="nv">blocking_mode: </span><span class="s">&#39;async&#39;</span><span class="p">,</span> <span class="nv">max_rate: </span><span class="mi">1000</span><span class="p">,</span>  <span class="nv">nom_rate: </span><span class="mi">1</span>     <span class="p">}</span>
        <span class="nv">motor_goal: </span>         <span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;motor_goal&#39;</span><span class="p">,</span>            <span class="nv">protocol: </span><span class="s">&#39;pull&#39;</span><span class="p">,</span>  <span class="nv">url: </span><span class="s">&#39;tcp://172.16.10.31:8117&#39;</span><span class="p">,</span> <span class="nv">blocking_mode: </span><span class="s">&#39;async&#39;</span><span class="p">,</span> <span class="nv">max_rate: </span><span class="mi">1000</span><span class="p">,</span>  <span class="nv">nom_rate: </span><span class="mi">1</span>     <span class="p">}</span>

    <span class="nv">output_ports:</span>
        <span class="nv">hmi_value: </span>          <span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;hmi_value&#39;</span><span class="p">,</span>             <span class="nv">protocol: </span><span class="s">&#39;pub&#39;</span><span class="p">,</span>   <span class="nv">url: </span><span class="s">&#39;tcp://127.0.0.1:8122&#39;</span><span class="p">,</span> <span class="nv">blocking_mode: </span><span class="s">&#39;async&#39;</span><span class="p">,</span> <span class="nv">max_rate: </span><span class="mi">1000</span><span class="p">,</span>  <span class="nv">nom_rate: </span><span class="mi">1</span>     <span class="p">}</span>
        <span class="nv">motor_value: </span>        <span class="p">{</span> <span class="nv">name: </span><span class="s">&#39;motor_value&#39;</span><span class="p">,</span>           <span class="nv">protocol: </span><span class="s">&#39;pub&#39;</span><span class="p">,</span>   <span class="nv">url: </span><span class="s">&#39;tcp://172.16.10.31:8123&#39;</span><span class="p">,</span> <span class="nv">blocking_mode: </span><span class="s">&#39;async&#39;</span><span class="p">,</span> <span class="nv">max_rate: </span><span class="mi">1000</span><span class="p">,</span>  <span class="nv">nom_rate: </span><span class="mi">1</span>     <span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>When troubleshooting it’s important to note the <cite>protocol</cite> and the <cite>url</cite> keys for a given port.  For example the <code class="docutils literal"><span class="pre">hmi_value.url</span></code> value is <code class="docutils literal"><span class="pre">tcp://127.0.0.1:8122</span></code> this means you’re trying to connect to port number <code class="docutils literal"><span class="pre">8122</span></code> on the address <code class="docutils literal"><span class="pre">127.0.0.1</span></code> (which is typically your local machine).  Whereas the <code class="docutils literal"><span class="pre">motor_value.url</span></code> is trying to connect to a different computer with an IP address <code class="docutils literal"><span class="pre">172.16.10.31</span></code> on port number <code class="docutils literal"><span class="pre">8123</span></code>.</p>
<p>If the computer at <code class="docutils literal"><span class="pre">172.16.10.31</span></code> is firewalled and not allowing connections to port <code class="docutils literal"><span class="pre">8123</span></code>, you will not be able to see data.  You will need to allow incoming connections to that port.  Likewise, if your component is running at the computer at <code class="docutils literal"><span class="pre">172.16.10.31</span></code> and you are trying to read data from <code class="docutils literal"><span class="pre">127.0.0.1</span></code>, you will not see any data.  You will need to change the IP to match the computer where your component is running.</p>
<p>Additionally, the UI can only read data from ports configured with the <code class="docutils literal"><span class="pre">pub</span></code> protocol.</p>
<p>If you make changes to the config file, you will need to restart the command line app; you can do this by pressing <code class="docutils literal"><span class="pre">CTRL</span> <span class="pre">+</span> <span class="pre">C</span></code>.</p>
<ul>
<li><p class="first"><strong>Incorrect NODE_MODULE_VERSION</strong>: In some cases, the <code class="docutils literal"><span class="pre">$GMT_GLOBAL/node_modules</span></code> will take precedent over the ones used by the App.  In this case, rename the <code class="docutils literal"><span class="pre">$GMT_GLOBAL/node_modules</span></code> to something like <code class="docutils literal"><span class="pre">$GMT_GLOBAL/node_modules.bak</span></code>.</p>
</li>
<li><p class="first"><strong>Unresponsive UI</strong>: in some case if the UI becomes unresponsive, press <code class="docutils literal"><span class="pre">CMD+R</span></code> to refresh.  If that fails to solve the problem, restart the CLI app.  You can stop the CLI app with <code class="docutils literal"><span class="pre">CTRL+C</span></code>.</p>
</li>
<li><p class="first"><strong>No navigation tree</strong>: the navigation tree is rendered off the local bundles in <code class="docutils literal"><span class="pre">$GMT_LOCAL\etc\bundles</span></code>.  The bundles described there need to have been built with webpack.</p>
</li>
<li><p class="first"><strong>No data</strong>: Ensure that the ports used by the controllers to publish data are accessible through the firewall. The following command should be used on the Device Control Computer to open the applicable range of ports (8122 - 8124):</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo firewall-cmd --add-port<span class="o">=</span><span class="m">8122</span>-8124/tcp
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../data_products/index.html" class="btn btn-neutral float-right" title="Data Products" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hdk_example.html" class="btn btn-neutral" title="12. HDK example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.7.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>