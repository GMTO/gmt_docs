

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Installing the SDK &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/additional_style.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../index.html"/>
        <link rel="up" title="Software Development" href="index.html"/>
        <link rel="next" title="1.2.2.1. Fedora 28 Server" href="dev_environment/fedora_server.html"/>
        <link rel="prev" title="Software Development" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_architecture/index.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Software Development</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1. Installing the SDK</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#development-platform">1.1. Development Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="#server-configuration">1.2. Server Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#required-hardware">1.2.1. Required Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="#operating-system">1.2.2. Operating System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#repository-configuration">1.2.3. Repository Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#package-list">1.2.4. Package List</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-installation">1.2.5. Node Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mongodb-configuration">1.2.6. MongoDB Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ethercat-configuration">1.2.7. Ethercat Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#network-time-protocol-configuration">1.2.8. Network Time Protocol Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#precision-time-protocol-configuration-optional">1.2.9. Precision Time Protocol Configuration (optional)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#software-development-kit-sdk">1.3. Software Development Kit (SDK)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operations-workstation-configuration-optional-macos-only">1.4. Operations Workstation Configuration (optional, MacOS only)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">1.4.1. Operating System</a></li>
<li class="toctree-l4"><a class="reference internal" href="#packages">1.4.2. Packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-installation">1.4.3. Python Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">1.4.4. Node Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sdk-installation">1.4.5. SDK Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">1.5. Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">2. Upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtual_machine/virtual_machine.html">3. Installing a Virtual Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="gds_guide.html">4. gds documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="grs_guide.html">5. grs documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="modeling_guidelines.html">6. Model specification guide document</a></li>
<li class="toctree-l2"><a class="reference internal" href="model_language_mapping/index.html">7. Model-language mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdk_1_6_migration_guide.html">8. Migration guide to SDK 1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_guidelines.html">9. OCS Test Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_services_user_guide.html">10. Core Services user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="isample_example.html">11. ISample Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdk_example.html">12. HDK example</a></li>
<li class="toctree-l2"><a class="reference internal" href="ui_fwk.html">13. UI Framework</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT Software And Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Software Development</a> &raquo;</li>
        
      <li>1. Installing the SDK</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-the-sdk">
<span id="installation"></span><h1>1. Installing the SDK<a class="headerlink" href="#installing-the-sdk" title="Permalink to this headline">¶</a></h1>
<div class="section" id="development-platform">
<h2>1.1. Development Platform<a class="headerlink" href="#development-platform" title="Permalink to this headline">¶</a></h2>
<p>The development platform is no longer distributed as a standalone ISO file. Instead, the following guide is provided to assist with hardware, operating system and third-party software configuration required for running the OCS SDK. Some key areas, such as disk partitioning, user authentication and NFS mounting of home directories, depend on individual factors at each partner institution and should therefore be considered examples only.</p>
<p>Benefits of this approach, versus distributing the complete ISO, include the ability to support different network, hardware and software platforms used for software development by different partner institutions, as well as allowing for separate upgrade schedules for the Development Platform and Software Development Kit without affecting ongoing subsystem software development.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">At GMTO, these instructions are formalized using Kickstart files and installed via the network using tools such as Cobbler. The GMTO DevOps team can provide assistance in setting up a similar system for development at partner institutions, if required.</p>
</div>
<p>The Observatory Control System (OCS) is designed to be a distributed system with device control components running on real-time computers, connected to common services and user interface components via the control network.</p>
<dl class="docutils">
<dt>For device control systems, the following operating systems are supported:</dt>
<dd><ul class="first last simple">
<li>Fedora server</li>
</ul>
</dd>
<dt>For user interfaces, the following operating systems are supported:</dt>
<dd><ul class="first last simple">
<li>MacOS</li>
</ul>
</dd>
</dl>
<p>Future versions of the SDK will only support CentOS and MacOS (only for the UI framework). Fedora has a very short release and support cycle (6 months and 18 months respectively), which is not ideal for a platform that requires significant stability over long periods of time.</p>
</div>
<div class="section" id="server-configuration">
<h2>1.2. Server Configuration<a class="headerlink" href="#server-configuration" title="Permalink to this headline">¶</a></h2>
<p>Servers are used for developing, running and testing device control software and core services. When real-time communication with hardware is required, the real-time kernel should be installed and configured. The following guidelines for creating a server should be tailored according to its intended purpose.</p>
<div class="section" id="required-hardware">
<h3>1.2.1. Required Hardware<a class="headerlink" href="#required-hardware" title="Permalink to this headline">¶</a></h3>
<p>Minimum hardware requirements for development machines:</p>
<blockquote>
<div><ul class="simple">
<li>Intel Pentium 4 or higher, 2 GHz CPU</li>
<li>1 GB Memory</li>
<li>20 GB Hard drive</li>
</ul>
</div></blockquote>
<p>Typical GMT OCS development machine specs:</p>
<blockquote>
<div><ul class="simple">
<li>Intel Xeon E3 or higher, 3.2 GHz CPU</li>
<li>4 - 8 GB Memory</li>
<li>120 - 250 GB Hard drive</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="operating-system">
<h3>1.2.2. Operating System<a class="headerlink" href="#operating-system" title="Permalink to this headline">¶</a></h3>
<p>Install the Operating System using these instructions:</p>
<blockquote>
<div><div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev_environment/fedora_server.html">1.2.2.1. Fedora 28 Server</a></li>
</ul>
</div>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you plan to develop real-time components, the Linux kernel requires the root partition to be an <strong>ext4</strong> file system. Please ensure that this is configured correctly in the disk partitioning settings.</p>
</div>
</div>
<div class="section" id="repository-configuration">
<h3>1.2.3. Repository Configuration<a class="headerlink" href="#repository-configuration" title="Permalink to this headline">¶</a></h3>
<p>Some required RPMs are built by GMTO and need to be downloaded from the GMTO Yum Repository, currently hosted on Amazon Web Services.</p>
<p>To add the GMT repositories:</p>
<ol class="arabic simple">
<li>Add the file <code class="docutils literal"><span class="pre">/etc/yum.repos.d/gmt.repo</span></code> with the following content:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>gmt<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>GMT <span class="nv">$releasever</span> - <span class="nv">$basearch</span>
<span class="nv">baseurl</span><span class="o">=</span>http://52.52.46.32/srv/gmt/yum/stable/<span class="nv">$releasever</span>/
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
<span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Add the file <code class="docutils literal"><span class="pre">/etc/yum.repos.d/gmt-updates.repo</span></code> with the following content:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>gmt-updates<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>GMT <span class="nv">$releasever</span> - <span class="nv">$basearch</span> - Updates
<span class="nv">baseurl</span><span class="o">=</span>http://52.52.46.32/srv/gmt/yum/updates/<span class="nv">$releasever</span>/
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
<span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="package-list">
<h3>1.2.4. Package List<a class="headerlink" href="#package-list" title="Permalink to this headline">¶</a></h3>
<p>The following RPM packages should be installed by an Administrative user for use in the development environment:</p>
<ol class="arabic simple">
<li>Install Common OS Utilities</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y xorg-x11-xauth urw-fonts wget net-tools pciutils
$ sudo dnf install -y strace rpl bash-completion sed
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Install Development Tools</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y autoconf automake cmake elfutils gcc gdb libtool make
$ sudo dnf install -y cpp cscope ctags gc gcc-c++ gcc-gdb-plugin glibc-devel
$ sudo dnf install -y glibc-headers kernel-headers libstdc++-devel
$ sudo dnf install -y flex git libcurl-devel
$ sudo dnf install -y python3-sphinx python3-sphinx_rtd_theme
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Install OCS Dependencies</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y rdma librdmacm-devel boost-devel
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="node-installation">
<h3>1.2.5. Node Installation<a class="headerlink" href="#node-installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Download and install <strong>Node version 10</strong>:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ curl -sL https://rpm.nodesource.com/setup_10.x <span class="p">|</span> sudo bash -
$ sudo dnf install -y nodejs
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Install necessary node packages:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo npm install -g coffeescript webpack webpack-cli raw-loader
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="mongodb-configuration">
<h3>1.2.6. MongoDB Configuration<a class="headerlink" href="#mongodb-configuration" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Install the necessary packages:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y mongodb mongodb-server
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Configure the firewall</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo firewall-offline-cmd --direct --add-rule ipv4 filter INPUT <span class="m">0</span> -p tcp --dport <span class="m">27017</span> -j ACCEPT
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Enable the MongoDB service</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo systemctl <span class="nb">enable</span> mongod
$ sudo systemctl start mongod
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Check that the MongoDB service is up</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo systemctl status -l mongod
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="ethercat-configuration">
<h3>1.2.7. Ethercat Configuration<a class="headerlink" href="#ethercat-configuration" title="Permalink to this headline">¶</a></h3>
<p>EtherCAT is a high-speed fieldbus communication system used for real-time control. The following configuration steps should be used as a guide when configuring EtherCAT communications.</p>
<ol class="arabic simple">
<li>Install the real-time kernel and relevant packages</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y --nogpgcheck kernel-3.14.73-rt78.x86_64 ethercat-devel
</pre></div>
</div>
</div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This Linux kernel requires the root partition to be an <strong>ext4</strong> file system. Otherwise, your machine will not boot.</p>
</div>
<ol class="arabic simple" start="2">
<li>Select the Ethernet interface to be used for EtherCAT communication (e.g. enp4s0) and edit the corresponding configuration file (e.g. <code class="docutils literal"><span class="pre">/etc/sysconfig/network-scripts/ifcfg-enp4s0</span></code>) to set the following options:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">BOOTPROTO</span><span class="o">=</span>none
<span class="nv">ONBOOT</span><span class="o">=</span>no
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Check the Hardware Address of the selected EtherCAT network interface</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ifconfig
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Edit <code class="docutils literal"><span class="pre">/etc/ethercat.conf</span></code> and set the following configuration options:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">MASTER0_DEVICE</span><span class="o">=</span><span class="s2">&quot;&lt;mac_address_1&gt;&quot;</span>
<span class="nv">MASTER0_BACKUP</span><span class="o">=</span><span class="s2">&quot;&lt;mac_address_2&gt;&quot;</span>  <span class="c1"># optional line</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">&lt;mac_address_1&gt;</span></code> and <code class="docutils literal"><span class="pre">&lt;mac_address_2&gt;</span></code> are the two hardware addresses associated with the Ethercat network interface communicating with the Ethercat ring (redundant topology). If you you prefer using a linear topology (non redundant), comment or remove the second line (<code class="docutils literal"><span class="pre">MASTER0_BACKUP=&quot;&lt;mac_address_2&gt;&quot;</span></code>).</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Edit <code class="docutils literal"><span class="pre">/usr/lib/systemd/system/ethercat.service</span></code> and uncomment the following line:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">Before</span><span class="o">=</span>network.service
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>Reboot into the RT Kernel, if you’re not in it already.</li>
<li>Enable the Ethercat service</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo systemctl <span class="nb">enable</span> ethercat
$ sudo systemctl start ethercat
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="8">
<li>Edit <code class="docutils literal"><span class="pre">/etc/security/limits.d/99-realtime.conf</span></code> and add the following options:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>@realtime - rtprio <span class="m">99</span>
@realtime - memlock unlimited
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="9">
<li>Add a new group and add the “gmto” user to it.</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo groupadd -f -g <span class="m">2001</span> realtime
$ sudo usermod --groups realtime gmto
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="8">
<li>Test the Ethercat configuration</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ ethercat master
$ ethercat slaves
</pre></div>
</div>
</div></blockquote>
<p>If the “ethercat master” command does not produce the correct output, ensure that you’re currently running the real-time kernel. If the “ethercat slaves” command produces no output, check that the ethernet cable is connected to the correct port as configured above.</p>
</div>
<div class="section" id="network-time-protocol-configuration">
<h3>1.2.8. Network Time Protocol Configuration<a class="headerlink" href="#network-time-protocol-configuration" title="Permalink to this headline">¶</a></h3>
<p>For general network timekeeping, use NTP, unless Precision Time Protocol is required.</p>
<ol class="arabic simple">
<li>Install the necessary packages:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y chrony
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Enable the NTP Service</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo systemctl <span class="nb">enable</span> chronyd
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="precision-time-protocol-configuration-optional">
<h3>1.2.9. Precision Time Protocol Configuration (optional)<a class="headerlink" href="#precision-time-protocol-configuration-optional" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Install the necessary packages:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y linuxptp
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Edit <code class="docutils literal"><span class="pre">/etc/ptp4l.conf</span></code> and add the following options:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>global<span class="o">]</span>
slaveOnly       <span class="m">1</span>
verbose         <span class="m">1</span>
time_stamping   software
summary_interval <span class="m">6</span>
<span class="o">[</span>enp3s0<span class="o">]</span>
</pre></div>
</div>
</div></blockquote>
<p>where <code class="docutils literal"><span class="pre">[enp3s0]</span></code> should be set to the interface to use for PTP.</p>
<ol class="arabic simple" start="3">
<li>Edit <code class="docutils literal"><span class="pre">/etc/sysconfig/phc2sys</span></code> and add the following options:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&quot;-a -r -u 60&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Edit <code class="docutils literal"><span class="pre">/etc/sysconfig/ptp4l</span></code> and add the following options:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&quot;-f /etc/ptp4l.conf -i enp3s0&quot;</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Configure access through the firewall</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo firewall-offline-cmd --direct --add-rule ipv4 filter INPUT <span class="m">0</span> -p udp --dport <span class="m">319</span>:320 -j ACCEPT
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>Enable the ptp service</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo systemctl <span class="nb">enable</span> ptp4l
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="software-development-kit-sdk">
<span id="sdk-install"></span><h2>1.3. Software Development Kit (SDK)<a class="headerlink" href="#software-development-kit-sdk" title="Permalink to this headline">¶</a></h2>
<p>The Software Development Kit is distributed as a TAR file and can be downloaded from the GMTO release server.</p>
<p>The SDK should be installed in a <strong>Global GMT Software Location</strong>, defined by the GMT_GLOBAL environment variable (default value: /opt/gmt). A <strong>Local Working Directory</strong>, defined by the GMT_LOCAL variable, is used as a unique workspace for individual developers. The local working directory typically resides underneath the /home/&lt;username&gt; directory.</p>
<ol class="arabic simple">
<li>Download the latest SDK distribution:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ wget http://52.52.46.32/srv/gmt/releases/sdk/linux/gmt-sdk.tar.gz
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Extract the TAR file in the /opt directory, into a new folder for the latest release:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo mkdir /opt/gmt_release_1.6.1
$ sudo tar -xzvf gmt-sdk.tar.gz -C /opt/gmt_release_1.6.1
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Create a symbolic link from the <strong>Global GMT Software Location</strong> to the latest release:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo ln -sfn gmt_release_1.6.1 /opt/gmt
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Create a <strong>Local Working Directory</strong></li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir &lt;local_working_dir&gt;
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">&lt;local_working_dir&gt;</span></code> is in the current users’ home directory, for example ~/work. The GMT software modules developed by the user are created in this folder.</p>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>Add the following lines to your .bash_profile (or .kshrc or .bashrc depending on your preferred shell)</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">GMT_GLOBAL</span><span class="o">=</span>/opt/gmt
$ <span class="nb">export</span> <span class="nv">GMT_LOCAL</span><span class="o">=</span>&lt;local_working_dir&gt;
$ <span class="nb">source</span> <span class="nv">$GMT_GLOBAL</span>/bin/gmt_env.sh
</pre></div>
</div>
<p>This will ensure that the environment variables are correctly configured when opening a new terminal. Please log out and back in for the changes to take effect. To configure the environment for the current shell, run the commands manually.</p>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>Check the values of the environment variables:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ gmt_env
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="7">
<li>Install Node Modules</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_GLOBAL</span>
$ npm install

$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>
$ cp <span class="nv">$GMT_GLOBAL</span>/package.json ./
$ npm install
</pre></div>
</div>
<p>Install global node modules for <cite>Webpack</cite> and <cite>Coffeescript</cite>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo npm install -g coffeescript webpack webpack-cli coffee-loader
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="8">
<li>Initialize the Development Environment:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>
$ gds init
</pre></div>
</div>
<p>The correct folders will be created in the $GMT_LOCAL directory for use when compiling and running modules.</p>
</div></blockquote>
<ol class="arabic simple" start="9">
<li>Create a <strong>modules</strong> directory in $GMT_LOCAL</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>
$ mkdir modules
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="10">
<li>Create the <strong>bundles.coffee</strong> and <strong>ocs_local_bundle.coffee</strong> files, defining the local modules under development</li>
</ol>
<blockquote>
<div><p>These files may be copied from $GMT_GLOBAL and then edited to reflect the developer’s configuration.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir <span class="nv">$GMT_LOCAL</span>/etc/bundles
$ cp <span class="nv">$GMT_GLOBAL</span>/etc/bundles/bundles.coffee <span class="nv">$GMT_LOCAL</span>/etc/bundles/
$ cp <span class="nv">$GMT_GLOBAL</span>/etc/bundles/ocs_local_bundle.coffee <span class="nv">$GMT_LOCAL</span>/etc/bundles/
</pre></div>
</div>
<p>Edit <strong>bundles.coffee</strong> to point to the ocs_local_bundle.coffee file</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>module.exports <span class="o">=</span>
    ocs_local_bundle:   <span class="o">{</span>scope: <span class="s2">&quot;local&quot;</span>,  desc: <span class="s2">&quot;GMT iSample and HDK bundle&quot;</span><span class="o">}</span>
</pre></div>
</div>
<p>Edit <strong>ocs_local_bundle.coffee</strong> to include the isample and HDK modules, or other modules that you are working on</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>module.exports <span class="o">=</span>
name:      <span class="s2">&quot;local&quot;</span>
desc:      <span class="s2">&quot;List of local development modules&quot;</span>
elements:
    isample_dcs: <span class="o">{</span> active: true, test: false, developer: <span class="s1">&#39;gmto&#39;</span>, domain: <span class="s1">&#39;idcs&#39;</span> <span class="o">}</span>
    hdk_dcs:     <span class="o">{</span> active: true, test: false, developer: <span class="s1">&#39;gmto&#39;</span>, domain: <span class="s1">&#39;idcs&#39;</span> <span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="11">
<li>Build all model files from modules in your ocs_local_bundles definition using webpack. For example:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>/modules/ocs_hdk_dcs/model
$ webpack
$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>/modules/ocs_isample_dcs/model
$ webpack
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="operations-workstation-configuration-optional-macos-only">
<h2>1.4. Operations Workstation Configuration (optional, MacOS only)<a class="headerlink" href="#operations-workstation-configuration-optional-macos-only" title="Permalink to this headline">¶</a></h2>
<p>The OCS User Interface needs to be run on a system with sufficient graphical rendering capability. At the moment, the Real-time kernel used for device control systems running EtherCAT does not contain the graphics modules necessary to support the user interface. It is recommended to run the user interface in a Mac, connected to the DCS via the network. Future releases will include support for Linux workstations.</p>
<div class="section" id="id1">
<h3>1.4.1. Operating System<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Apple Mac systems have the operating system already installed. The User Interface has been tested on the following versions of MacOS:</p>
<blockquote>
<div><ul class="simple">
<li>MacOS High Sierra</li>
<li>MacOS Mojave</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="packages">
<h3>1.4.2. Packages<a class="headerlink" href="#packages" title="Permalink to this headline">¶</a></h3>
<p>There are very few external packages that are not already installed in MacOS. The application Homebrew can be used to install these:</p>
<ol class="arabic simple">
<li>Install Homebrew</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ /usr/bin/ruby -e <span class="s2">&quot;</span><span class="k">$(</span>curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>More information can be found on the Homebrew website: &lt;<a class="reference external" href="https://brew.sh/">https://brew.sh/</a>&gt;</p>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Install common utilities</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ brew install wget
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="python-installation">
<h3>1.4.3. Python Installation<a class="headerlink" href="#python-installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Check whether Python3 is installed</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ python3 --version
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Install Python3, if not already installed</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ brew install python3
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id2">
<h3>1.4.4. Node Installation<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Install Node</li>
</ol>
<p>Follow the instructions here <a class="reference external" href="https://nodesource.com/blog/installing-nodejs-tutorial-mac-os-x/">https://nodesource.com/blog/installing-nodejs-tutorial-mac-os-x/</a></p>
</div>
<div class="section" id="sdk-installation">
<h3>1.4.5. SDK Installation<a class="headerlink" href="#sdk-installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Follow steps on section <a class="reference internal" href="#sdk-install"><span class="std std-ref">Software Development Kit (SDK)</span></a> for installing the SDK.</li>
</ol>
<p>2. Create a <strong>local javascript library folder</strong> in order to create built bundles for your model files.
This folder is also used to install upgraded version of the library.</p>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir -p <span class="nv">$GMT_LOCAL</span>/lib/js
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Copy UI JavaScript lib files to $GMT_LOCAL/lib/js/</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ cp ocs_ui_fwk_elements.js ocs_ui_fwk_widgets.js ocs_ui_fwk.js <span class="nv">$GMT_LOCAL</span>/lib/js/
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Systems that run the User Interface require compiled model files to be used by the Navigator application.</li>
</ol>
<blockquote>
<div><p>Build all model files from modules in your ocs_local_bundles definition using webpack. For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>/modules/ocs_hdk_dcs/model
$ webpack
$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>/modules/ocs_isample_dcs/model
$ webpack
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="next-steps">
<h2>1.5. Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>To start using the SDK with the Hardware Development Kit (HDK), instructions can be found here: <a class="reference internal" href="hdk_example.html#hdk-example"><span class="std std-ref">HDK example</span></a>.</p>
<p>To run the Navigator application and start using the UI framework, see the UI Framework guide: <a class="reference internal" href="ui_fwk.html#ui-fwk"><span class="std std-ref">UI Framework</span></a>.</p>
<p><a class="reference internal" href="#installation"><span class="std std-ref">[back to top]</span></a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dev_environment/fedora_server.html" class="btn btn-neutral float-right" title="1.2.2.1. Fedora 28 Server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Software Development" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.6.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>