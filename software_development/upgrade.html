

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Upgrade &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/additional_style.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../index.html"/>
        <link rel="up" title="Software Development" href="index.html"/>
        <link rel="next" title="3. Installing a Virtual Machine" href="virtual_machine/virtual_machine.html"/>
        <link rel="prev" title="1.2.3.2. Mounting Home Directories using NFS" href="dev_environment/nfs_configuration.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_architecture/index.html">Architecture and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Software Development</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="installation.html">1. Installing the SDK</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. Upgrade</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#upgrading-from-v1-3-to-1-4">2.1. Upgrading from v1.3 to 1.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#uninstall-old-gmt-packages">2.1.1. Uninstall Old GMT packages</a></li>
<li class="toctree-l4"><a class="reference internal" href="#repository-configuration">2.1.2. Repository Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#package-list">2.1.3. Package List</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-installation">2.1.4. Node Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#software-development-kit-sdk">2.2. Software Development Kit (SDK)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="virtual_machine/virtual_machine.html">3. Installing a Virtual Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="isample_example.html">4. ISample Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="contribute.html">5. Contribute</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GMT Software And Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Software Development</a> &raquo;</li>
        
      <li>2. Upgrade</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="upgrade">
<span id="id1"></span><h1>2. Upgrade<a class="headerlink" href="#upgrade" title="Permalink to this headline">¶</a></h1>
<p>As an alternative to installing the Operating System and associated packages from scratch, tho following procedure can be followed to upgrade an existing version 1.3 system to version 1.4. Please refer to the <a class="reference internal" href="installation.html#installation"><span class="std std-ref">Installing the SDK</span></a> page for help in configuring individual services.</p>
<div class="section" id="upgrading-from-v1-3-to-1-4">
<h2>2.1. Upgrading from v1.3 to 1.4<a class="headerlink" href="#upgrading-from-v1-3-to-1-4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="uninstall-old-gmt-packages">
<h3>2.1.1. Uninstall Old GMT packages<a class="headerlink" href="#uninstall-old-gmt-packages" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Uninstall existing GMT packages and all their dependencies</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf remove -y gmt* gmtx*
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="repository-configuration">
<h3>2.1.2. Repository Configuration<a class="headerlink" href="#repository-configuration" title="Permalink to this headline">¶</a></h3>
<p>Some required RPMs are built by GMTO and need to be downloaded from the GMTO Yum Repository, currently hosted on Amazon Web Services.</p>
<p>Ensure that the GMT repositories are correctly configured:</p>
<ol class="arabic simple">
<li>Add the file <code class="docutils literal"><span class="pre">/etc/yum.repos.d/gmt.repo</span></code> with the following content:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>gmt<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>GMT <span class="nv">$releasever</span> - <span class="nv">$basearch</span>
<span class="nv">baseurl</span><span class="o">=</span>http://52.52.46.32/srv/gmt/yum/stable/<span class="nv">$releasever</span>/
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
<span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Add the file <code class="docutils literal"><span class="pre">/etc/yum.repos.d/gmt-updates.repo</span></code> with the following content:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span><span class="o">[</span>gmt-updates<span class="o">]</span>
<span class="nv">name</span><span class="o">=</span>GMT <span class="nv">$releasever</span> - <span class="nv">$basearch</span> - Updates
<span class="nv">baseurl</span><span class="o">=</span>http://52.52.46.32/srv/gmt/yum/updates/<span class="nv">$releasever</span>/
<span class="nv">gpgcheck</span><span class="o">=</span><span class="m">0</span>
<span class="nv">enabled</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="package-list">
<h3>2.1.3. Package List<a class="headerlink" href="#package-list" title="Permalink to this headline">¶</a></h3>
<p>The following RPM packages should be installed by an Administrative user for use in the development environment:</p>
<ol class="arabic simple">
<li>Install Common OS Utilities</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y xorg-x11-xauth urw-fonts wget net-tools pciutils
$ sudo dnf install -y strace rpl bash-completion sed
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Install Development Tools</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y autoconf automake cmake elfutils gcc gdb libtool
$ sudo dnf install -y cpp cscope ctags gc gcc-c++ gcc-gdb-plugin glibc-devel
$ sudo dnf install -y glibc-headers kernel-headers libstdc++-devel
$ sudo dnf install -y flex git libcurl-devel
$ sudo dnf install -y python3-sphinx python3-sphinx_rtd_theme
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Install OCS Dependencies</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo dnf install -y rdma librdmacm-devel
$ sudo dnf install -y boost-devel freeopcua freeopcua-devel
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="node-installation">
<h3>2.1.4. Node Installation<a class="headerlink" href="#node-installation" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Download and install <strong>Node version 8</strong></li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ curl -sL https://rpm.nodesource.com/setup_8.x <span class="p">|</span> sudo bash -
$ dnf install -y nodejs
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Install necessary node packages:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ npm install -g coffeescript webpack webpack-cli raw-loader
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="software-development-kit-sdk">
<h2>2.2. Software Development Kit (SDK)<a class="headerlink" href="#software-development-kit-sdk" title="Permalink to this headline">¶</a></h2>
<p>The Software Development Kit is distributed as a TAR file and can be downloaded from the GMTO release server.</p>
<p>The SDK should be installed in a <strong>Global GMT Software Location</strong>, defined by the GMT_GLOBAL environment variable (default value: /opt/gmt). A <strong>Local Working Directory</strong>, unique for each individual developer (GMT_LOCAL). The local working directory typically resides underneath the /home/&lt;username&gt; directory.</p>
<ol class="arabic simple">
<li>Create the <strong>Global GMT Software Location</strong></li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir /opt/gmt
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Download the latest SDK distribution and install in the <strong>Global GMT Software Location</strong>:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ wget -P /opt/gmt http://52.52.46.32/srv/gmt/releases/sdk/linux/gmt-sdk-1.4-0.tar.gz
$ <span class="nb">cd</span> /opt/gmt
$ sudo tar -xvzf gmt-sdk-1.4.0.tar.gz
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Create a <strong>Local Working Directory</strong></li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir &lt;local_working_dir&gt;
</pre></div>
</div>
</div></blockquote>
<p>where <code class="docutils literal"><span class="pre">&lt;local_working_dir&gt;</span></code> is in the current users’ home directory, typically /home/&lt;username&gt;/&lt;path_to_working_dir&gt;. The GMT software modules developed by the user are created in this folder.</p>
<ol class="arabic simple" start="4">
<li>Add the following lines to your .profile (or .kshrc or .bashrc depending on your preferred shell)</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">export</span> <span class="nv">GMT_GLOBAL</span><span class="o">=</span>/opt/gmt
$ <span class="nb">export</span> <span class="nv">GMT_LOCAL</span><span class="o">=</span>&lt;local_working_dir&gt;
$ <span class="nb">source</span> <span class="nv">$GMT_GLOBAL</span>/bin/gmt_env.sh
</pre></div>
</div>
</div></blockquote>
<p>This will ensure that the environment variables are correctly configured when opening a new terminal. Please log out and back in for the changes to take effect. To configure the environment for the current shell, run the commands manually.</p>
<ol class="arabic simple" start="5">
<li>Check the values of the environment variables:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ gmt_env
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="6">
<li>Initialize the Development Environment:</li>
</ol>
<blockquote>
<div><div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> <span class="nv">$GMT_LOCAL</span>
$ gds init
</pre></div>
</div>
</div></blockquote>
<p>The correct folders will be created in the $GMT_LOCAL directory for use when compiling and running modules.</p>
<p><a class="reference internal" href="#upgrade"><span class="std std-ref">[back to top]</span></a></p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="virtual_machine/virtual_machine.html" class="btn btn-neutral float-right" title="3. Installing a Virtual Machine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="dev_environment/nfs_configuration.html" class="btn btn-neutral" title="1.2.3.2. Mounting Home Directories using NFS" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.4-1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>